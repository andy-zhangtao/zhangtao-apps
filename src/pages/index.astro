---
import { getCollection } from 'astro:content';
import Layout from '../components/Layout.astro';
import AppCard from '../components/AppCard.astro';

const apps = await getCollection('apps');
const featuredApps = apps.filter(app => app.data.featured);
const regularApps = apps.filter(app => !app.data.featured);
---

<Layout title="App Showcase - å¼ æ¶›çš„åº”ç”¨å±•ç¤º">
  <main class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
    <div class="container mx-auto px-4 py-16">
      <header class="text-center mb-16">
        <h1 class="text-5xl font-bold text-gray-900 mb-4">
          æˆ‘çš„åº”ç”¨å±•ç¤º
        </h1>
        <p class="text-xl text-gray-600 max-w-2xl mx-auto">
          å±•ç¤ºæˆ‘å¼€å‘çš„ç§»åŠ¨ç«¯å’Œæ¡Œé¢åº”ç”¨ï¼Œä½¿ç”¨ç°ä»£æŠ€æœ¯æ ˆæ„å»ºçš„é«˜è´¨é‡åº”ç”¨ç¨‹åº
        </p>
        <div class="mt-8 flex justify-center space-x-4">
          <div class="flex items-center space-x-2 bg-white px-4 py-2 rounded-full shadow-sm">
            <span class="w-3 h-3 bg-green-500 rounded-full"></span>
            <span class="text-sm text-gray-600">{apps.filter(app => app.data.status === 'published').length} ä¸ªå·²å‘å¸ƒ</span>
          </div>
          <div class="flex items-center space-x-2 bg-white px-4 py-2 rounded-full shadow-sm">
            <span class="w-3 h-3 bg-blue-500 rounded-full"></span>
            <span class="text-sm text-gray-600">{apps.filter(app => app.data.status === 'development').length} ä¸ªå¼€å‘ä¸­</span>
          </div>
        </div>
      </header>
      
      {featuredApps.length > 0 && (
        <section class="mb-16">
          <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">
            ğŸŒŸ ç²¾é€‰åº”ç”¨
          </h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            {featuredApps.map((app) => (
              <AppCard
                title={app.data.title}
                description={app.data.description}
                category={app.data.category}
                tech={app.data.tech}
                status={app.data.status}
                featured={app.data.featured}
                github={app.data.github}
                website={app.data.website}
                appStore={app.data.appStore}
                playStore={app.data.playStore}
                icon={app.data.icon}
                slug={app.slug}
              />
            ))}
          </div>
        </section>
      )}
      
      {regularApps.length > 0 && (
        <section>
          <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">
            ğŸ“± æ‰€æœ‰åº”ç”¨
          </h2>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {regularApps.map((app) => (
              <AppCard
                title={app.data.title}
                description={app.data.description}
                category={app.data.category}
                tech={app.data.tech}
                status={app.data.status}
                featured={app.data.featured}
                github={app.data.github}
                website={app.data.website}
                appStore={app.data.appStore}
                playStore={app.data.playStore}
                icon={app.data.icon}
                slug={app.slug}
              />
            ))}
          </div>
        </section>
      )}
      
      {apps.length === 0 && (
        <div class="text-center py-16">
          <div class="text-6xl mb-4">ğŸš€</div>
          <h3 class="text-2xl font-bold text-gray-900 mb-4">æ•¬è¯·æœŸå¾…</h3>
          <p class="text-gray-600">æ›´å¤šç²¾å½©åº”ç”¨æ­£åœ¨å¼€å‘ä¸­...</p>
        </div>
      )}
    </div>
  </main>
</Layout>